<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.backend.mapper.ListInventoryMapper">

    <resultMap id="BaseResultMap" type="com.backend.pojo.ListInventory">
            <id property="id" column="id" jdbcType="INTEGER"/>
            <result property="stockId" column="stock_id" jdbcType="INTEGER"/>
            <result property="date" column="date" jdbcType="TIMESTAMP"/>
            <result property="storagePrice" column="storage_price" jdbcType="DOUBLE"/>
            <result property="salePrice" column="sale_price" jdbcType="DOUBLE"/>
            <result property="profitPrice" column="profit_price" jdbcType="DOUBLE"/>
            <result property="remainingCount" column="remaining_count" jdbcType="INTEGER"/>
            <result property="replenishCount" column="Replenish_count" jdbcType="INTEGER"/>
    </resultMap>



    <resultMap id="InventoryName" type="com.backend.pojo.ListInventoryName">
        <id property="id" column="id" jdbcType="INTEGER"/>
        <result property="stockId" column="stock_id" jdbcType="INTEGER"/>
        <result property="stockName" column="name" jdbcType="VARCHAR"/>
        <result property="date" column="date" jdbcType="TIMESTAMP"/>
        <result property="storagePrice" column="storage_price" jdbcType="DOUBLE"/>
        <result property="salePrice" column="sale_price" jdbcType="DOUBLE"/>
        <result property="profitPrice" column="profit_price" jdbcType="DOUBLE"/>
        <result property="remainingCount" column="remaining_count" jdbcType="INTEGER"/>
        <result property="replenishCount" column="Replenish_count" jdbcType="INTEGER"/>
    </resultMap>

    <sql id="Base_Column_List">
        id,stock_id,date,
        storage_price,sale_price,profit_price,
        remaining_count,Replenish_count
    </sql>


    <select id="SelectDateInventory" resultMap="InventoryName">

        SELECT i.id,i.stock_id,s.name,i.storage_price,i.date,i.sale_price,i.profit_price,i.remaining_count,i.Replenish_count
        FROM list_inventory i,(
            SELECT id,name FROM list_stock
        ) s WHERE s.id = i.stock_id and i.date like concat(#{date},'%')
        order by i.id
    </select>


    <select id="SelectAllDate" resultType="java.time.LocalDate">
        SELECT DISTINCT date_format(date,'%Y-%m-%d') FROM list_inventory

    </select>

</mapper>
